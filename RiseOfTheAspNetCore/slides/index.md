- title : Rise of ASP.NET Core
- description : 
- author : Jarosław Krefta, Paweł Jeliński
- theme : night
- transition : default

***

##Rise of ASP.NET Core
<br/>
<br/>
Jarosław Krefta<br/>
Paweł Jeliński

***

###Who do we work for?

---

![Jet Shop](images/introduction/jetshop.png)

---

###Aka " The Jetson team " :)
![Jetsons Team](images/introduction/jetsons_team.jpg)

***

###Who are we?
![Jetsons Team](images/introduction/drombo.jpg)

***

###Jarosław Krefta

---

###Guess which one I am? :)
![Astro and George](images/introduction/jarek/astro_plus_george.jpg)

---

###Obviously!
![Astruuu](images/introduction/jarek/astruuu.jpg)

---

###But 20 years later
![Chewbacca](images/introduction/jarek/chewbacca.jpg)

***

###Paweł Jeliński

---

###How do I see Myself
![Judge Dreed](images/introduction/pawel/dreed.png)

---

###How teammates see me
![Justice!](images/introduction/pawel/justice.jpg)

---

###What does our boss see
![Spanish Inquisition](images/introduction/pawel/spanish_inquisition.jpg)

---

###To be more exact
![Inquisitor](images/introduction/pawel/inquisitor.jpg)

*** 

###What are we not going to talk about
<img alt="Pinky and Brain" src="images/introduction/pinky_and_brain.jpg" class="mh600" />

--- 

###We are not going to sell you anything
###.Net is not a " Golden Hammer "

--- 

###What are we going to talk about
![Spoon](images/introduction/spoon.jpg)

***  

###Lets go back to ...

***

##1996

---

###ASP CLASSIC
![Asp Classic Logo](images/content/logos/asp_classic.png)

---

####ASP Classic is Microsoft's first server-side script engine for dynamically generated web pages
* Scripting via Virtual Basic (Yes! Not Visual!)
* Addon for IIS
* Supports JScript
* Supports COM modules
* Supports ActiveX(PearlScript)
* Runs on Windows NT 4.0
* Part of Windows Server 2000

---
```vb 
<html>
<body>

<%
    Dim x(1,1)
    x(0,0)="Volvo"
    x(0,1)="BMW"
    x(0,2)="Ford"
    x(1,0)="Apple"
    x(1,1)="Orange"
    for i=0 to 1
        response.write("<p>")
        for j=0 to 1
            response.write(x(i,j) & "<br />")
        next
        response.write("</p>")
    next
%>

</body>
</html>
```

---

###Other notable facts
* Release of **IIS 3.0**
* Release of **Internet Explorer 3.0**
* First release of **JScript**
* First release of **ActiveX**

---

###Icon of the "Internet" 
![Asp Classic Logo](images/content/logos/ie3.jpg)

---

###How to internet
<img alt="IE starter kit" src="images/content/internet-starter-kit.jpg" class="mh500" />

***

##1997

---

###XSP / ASP+
_"We originally called it XSP; and people would always ask what the X stood for. At the time it really didn't stand for anything. XML started with that; XSLT started with that. Everything cool seemed to start with an X, so that's what we originally named it. In the first six months, we didn't use .NET. The CLR didn't exist—it was just starting around the same time we were—so, we were doing most of our prototyping in C++, JavaScript, and ActiveScript script engines. We knew we wanted an object-oriented environment, and we really liked the characteristics a managed programming model provided in terms of garbage collection, nice encapsulation, and object-orientation techniques..._

---

_... We actually started writing production code in C++, though, because at the time we didn't really have a good runtime platform on which to build. We got about two weeks into it when we met up with the CLR team; at the time that team had no partners inside the company building on top of them. The only compiler they had was this thing called "simple managed C," which we affectionately called "smack." We ended up saying, "Maybe we should build on this." It was a huge risk, and at the time our team consisted of three or four people total. We were allowed to take a bet on it mainly because nobody really cared if we failed. Thankfully, we did and it paid off in a huge way. The rest is history, so to speak."_

___Scott Guthrie, co creator of ASP.NET___

---

####There actually was a book on ASP+ released in 2000
![Asp Plus Book](images/content/asp_plus_book.jpg)

---

### Other notable facts

---

###First release of ECMA Script Standard
![ECMA Logo](images/content/logos/ecma.jpg)

---

###Emergence of new world wide web standard: HTML 4.0
![HTML4 Logo](images/content/logos/html4.png)

***

##1998

---

###Notable Microsoft releases
* ASP CLASSIC 3.0 - last of it`s kind :)
* IIS 5.0 - released with new ASP

---

###Flash
<img alt="Flash icon" src="images/content/flash/flash_icon.png" class="mh400" />

---

###Internet after release of Flash
![Omg cat](images/content/reactions/omg_cat.jpg)

---

###Micrsoft after release of Flash
![Mind Blown!](images/content/reactions/mind_blown.jpg)

---

###What Flash promised
![What flash promised](images/content/flash/flash_promise.jpeg)

---

###What Flash delivered
![What flash delivered](images/content/flash/flash_delivered.jpg)

***

##1999 - 2003

---

###ASP.NET 1.0 / 1.1
<img src="images/content/logos/asp_net_1_1.png" class="img-white" />

---

<img src="images/content/logos/ie6.png" class="img-white" />


---

###Emergence of new world wide web standards:
* Ajax
* XHTML

World wide web wanted more extensibility

---

###XHTML - pimp my HTML
![Pimp My HTML!](images/content/malczerati.jpg)


***

##2004

---

### Notable Microsoft releases

---

###...

---

###There is literaly nothing from Microsoft
![Where is everyone!?](images/content/Travolta2.gif)

***

##2005

---

###Microsoft realizes that they need to get their "stuff" together
![Turtle vs Rabbit!](images/content/turtle_rabit.jpg)

---

###So to make it up to web developers ...

---

###ASP.NET 2.0
* Full support of ECMA standard
* Generic types
* Support for x64 CPU's

***

##2006

---

###ASP.NET 3.0

---

![JQuery logo](images/content/logos/jquery.png)

---

###Micrsoft after last release of Flash
![Mind Blown!](images/content/reactions/mind_blown.jpg)

---

###Lets make our own!
![Mind Blown!](images/content/reactions/prise_the_sun.gif)

***

##2007

---

###SilverLight! Yeaaaah!
![Oh Yeah!](images/content/reactions/yeah.gif)

---

![Trump](images/content/reactions/trump.jpg)

---

![Sounds good, does not work!](images/content/reactions/sounds_good_does_not_work.jpg)

---

###ASP.NET 3.5
###SilverLight
###ASP.NET AJAX
###LINQ
###MVC CTP
###IE 7

---
###Press X to JSON
Added support for JSON and POX to WCF

***

##2008

---

###Chromium V8 engine
<img alt="V8 Chromium" src="images/content/logos/v8.png" class="img mh400" />

---

###New engine of internet
<img alt="V8 Engine" src="images/content/v8.jpg" class="img mh400" />

***

##2009

---

###MVC
###IE 8

---

###Emergence of EcmaScript5 and Node.Js
![Bane](images/content/bane/bane.jpg)

---

![You think internet is your ally!](images/content/bane/bane_internet.jpg)

***

##2010

---

###ASP.NET 4.0 and WEB PAGES
<img alt="Baman!" src="images/content/bman.jpg" class="w400" /> 

---

###Angular
![Bane holds Batman](images/content/bane/bane_picks_batman.jpg)

---

### ExpressJs, KnockoutJs, Backbone, Underscore
<img alt="Bane breaks Batman" src="images/content/bane/bane_breaks_batman.jpg" class="mh500" /> 

***

##2011


---

###MVC
<img alt="Asp Net MVC logo" src="images/content/logos/asp_net_mvc.png" class="img-white mh500" /> 

***

##2012

---

###ASP.NET 4.5 & TPL
![Tasks! Tasks everywhere!](images/content/tasks_tpl.png)

***

##2013

---

###IE 11
![Why do we fall Bruce?](images/content/WhyDoWeFall.gif)

---
###OWIN / Katana and SignalR
![So that we can get up!](images/content/PickUpLie.gif)

---

![React Invented!](images/content/gentelmen.jpg)

***

##2014

---

![Blue crawl text](images/content/star_wars/galaxy1.png)

---

![Title crawl text](images/content/star_wars/galaxy2.png)

---

![Content crawl text](images/content/star_wars/galaxy3.png)

***

##2015

---

###ASP.NET Core RC

---

###EcmaScript 6
<img alt="ES6 logo" src="images/content/logos/es6.png" class="img-white" /> 

---

###Edge
![Edge logo](images/content/logos/edge.jpg)

---

![Facepalm](images/content/reactions/facepalm.jpg)

---

![Triple facepalm](images/content/reactions/triple_facepalm.jpg)

---

- data-background: images/content/bluescreen.png

***

##2016

---

###ASP.NET Core 1.0
![Asp Net Core 1.0](images/content/logos/dotnetcore.png)

***

##2017

---

###ASP.Net Core 2.0
![John Cena Super Sayan](images/content/johncena.gif)

***

###Now

***

###How can we use this thing?

***

###Web application in 5 min :)

***

###Stack

<img alt="ASP.NET Core architecture" src="images/content/asp_core_architecture_transparent.png" class="img-white" />

---

###Kestrel

<img alt="Kestrel" class="img mh500" src="images/content/kestrel_bird.jpg" class="img-white" /> 

---

Kestrel is a cross-platform web server for ASP.NET Core based on libuv, a cross-platform asynchronous I/O library. Kestrel is the web server that's included by default in ASP.NET Core project templates. 

---
###Kestrel features

* Non-blocking network support
* Asynchronous file system access
* Timers
* Child processes

---

###Mediator pattern

![ATC mediator](images/content/ATC_mediator.gif)

---

Define an object that encapsulates how a set of objects interact. Mediator promotes loose coupling by keeping objects from referring to each other explicitly, and it lets you vary their interaction independently.

---

###From

![Layer architecture](images/content/onion.png)

---

###To

![Vertical separation](images/content/Vertical_separation.png)

---

###CQRS

![MediatR reuest model](images/content/MediatR.png)

---

###Frontend 

***

###Journey of request

---

###Human

---

###React component

---

###Event calls Cerebral signal

---

###Cerebral calls chain

---

###Chain calls service

---

###Kestrel receives request

---

###Middleware

---

###Controller

```csharp
 public class MagicController : Controller
{
    private readonly IMediator _mediator;

    public MagicController(IMediator mediator)
    {
        _mediator = mediator;
    }

    [HttpPost, Route("spell/cast/{spellId}")]
    public async Task<IActionResult> CastSpell(int spellId)
    {   
        var castSpellResponse = await _mediator.Send(new CastSpellRequest(spellId));
        return Ok(castSpellResponse);
    }
}
```

---

###Mediator

```csharp
builder.RegisterType<Mediator>().As<IMediator>().InstancePerLifetimeScope();

// request handlers
builder
    .Register<SingleInstanceFactory>(ctx => {
        var c = ctx.Resolve<IComponentContext>();
        return t => { object o; return c.TryResolve(t, out o) ? o : null; };
    })
    .InstancePerLifetimeScope();

// notification handlers
builder
    .Register<MultiInstanceFactory>(ctx => {
        var c = ctx.Resolve<IComponentContext>();
        return t => 
            (IEnumerable<object>)c.Resolve(
                typeof(IEnumerable<>).MakeGenericType(t)
            );
    })
    .InstancePerLifetimeScope();
```

---

###Handler

```csharp
public class MagicHandler : RequestHandler<CastSpellRequest, CastSpellResponse>
{
    private readonly IManaPool _manaPool;

    public CreateBoardHandler(IManaPool manaPool)
    {
        _manaPool = manaPool;
    }

    protected override CastSpellResponse HandleCore(CastSpellRequest request)
    {
        //...
    }
}
```

---

###Service

```csharp
public interface IManaPool
{
    int GetSomeMana();
}
```

***

###Layers of separation - SOLID

***

###Pros and cons

* Pros:
    - decoupling
    - performance
    - easy to extend
    - flexible

* Cons:
    - celebration
    - heavily depends on MediatR and Container

***

###DEMO :)

***

###Improvements

---

###Interceptors

---

### Monads - Result & Option 
![Monad monster](images/content/monad.jpg)

***

![Tank You!](images/epilogue/tank_you.jpg)

***

###Useful links

* https://stackify.com/what-is-kestrel-web-server/
* https://thefreezeteam.azurewebsites.net/2015/08/10/building-mvc-jimmy-style/
* https://msdn.microsoft.com/en-us/library/bb266332.aspx
* https://www.youtube.com/watch?v=kej3YJDMAW4